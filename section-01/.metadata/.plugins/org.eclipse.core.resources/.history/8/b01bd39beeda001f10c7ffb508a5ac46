package com.mayuktha.mapper;

import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;
import java.util.stream.Collectors;

import com.mayuktha.orders.dto.OrderDetailsDto;
import com.mayuktha.orders.entity.Order;
import com.mayuktha.orders.entity.OrderItems;

public class MapperUtil {

	
	public static Order mapToOrder(OrderDetailsDto orderDetailsDto,Order order) {
		
		order.setStatus("CREATED");
		order.setTotal(2);
		order.setUserId(orderDetailsDto.getUserId());
		order.setCreatedAt(LocalDateTime.now());
		return order;
	}
	public static List<OrderItems> mapToOrderItems(OrderDetailsDto orderDetailsDto) {
		if(null!=orderDetailsDto.getOrderItems() && orderDetailsDto.getOrderItems().size()>0) {
			List<OrderItems> OrderItemsList = new ArrayList<OrderItems>();
			orderDetailsDto.getOrderItems().stream().forEach(item->{
				OrderItems orderItems = new OrderItems();
				orderItems.setOrderId(orderDetailsDto.getOrderId());
				orderItems.setProductId(item.getProductId());
				orderItems.setCreatedAt(LocalDateTime.now());
				orderItems.setQuantity(item.getQuantity());
				orderItems.setPrice(item.getPrice());
				OrderItemsList.add(orderItems);
			});
			
		}
		return OrderItemsList;
		
		
		//orderItems.setCreatedAt(LocalDateTime.now());
		//orderItems
		
	}
}
